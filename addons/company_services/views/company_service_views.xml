<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Visualização de formulário -->
    <record id="view_company_service_form" model="ir.ui.view">
        <field name="name">company.service.form</field>
        <field name="model">company.service</field>
        <field name="arch" type="xml">
            <form string="Empresa e Serviços">
                <header>
                    <button name="action_sync_to_config_service"
                            string="Sincronizar com Sistema de IA"
                            type="object"
                            class="btn btn-success"
                            icon="fa-sync"
                            style="background-color: #00C853 !important; color: white !important; font-weight: bold !important; padding: 10px 20px !important; border-radius: 4px !important; box-shadow: 0 2px 4px rgba(0,0,0,0.2) !important;"/>
                    <field name="sync_status" widget="statusbar" statusbar_visible="not_synced,syncing,synced,error"/>
                </header>
                <sheet>
                    <div class="oe_title">
                        <h1>
                            <field name="name" placeholder="Nome da Empresa"/>
                        </h1>
                    </div>
                    <group>
                        <field name="description" placeholder="Descrição da empresa"/>
                    </group>
                    <!-- Campos computados invisíveis necessários para attrs -->
                    <field name="enable_sales" invisible="1"/>
                    <field name="enable_scheduling" invisible="1"/>
                    <field name="enable_delivery" invisible="1"/>
                    <field name="enable_support" invisible="1"/>
                    <notebook>
                        <page string="Informações da Empresa" name="company_info">
                            <p class="text-muted">
                                Inclua os dados básicos da sua empresa
                            </p>
                            <group string="Endereço da Empresa">
                                <group>
                                    <field name="street" placeholder="Rua e número"/>
                                    <field name="street2" placeholder="Complemento"/>
                                    <field name="city" placeholder="Cidade"/>
                                </group>
                                <group>
                                    <field name="state" placeholder="Estado"/>
                                    <field name="zip" placeholder="CEP"/>
                                    <field name="country" placeholder="País"/>
                                </group>
                            </group>
                        </page>
                        <page string="Horários de Funcionamento" name="business_hours">
                            <p class="text-muted">
                                Configure os dias e horários de funcionamento da sua empresa para que o agente de IA possa informar corretamente aos clientes quando sua empresa está disponível para atendimento.
                            </p>
                            <group string="Horário de Funcionamento">
                                <group>
                                    <field name="start_time"/>
                                    <field name="end_time"/>
                                    <field name="has_lunch_break"/>
                                </group>
                                <group attrs="{'invisible': [('has_lunch_break', '=', False)]}">
                                    <field name="lunch_break_start"/>
                                    <field name="lunch_break_end"/>
                                </group>
                            </group>
                            <group string="Dias de Funcionamento">
                                <group>
                                    <field name="monday"/>
                                    <field name="tuesday"/>
                                    <field name="wednesday"/>
                                    <field name="thursday"/>
                                </group>
                                <group>
                                    <field name="friday"/>
                                    <field name="saturday"/>
                                    <field name="saturday_start_time" attrs="{'invisible': [('saturday', '=', False)]}"/>
                                    <field name="saturday_end_time" attrs="{'invisible': [('saturday', '=', False)]}"/>
                                    <field name="sunday"/>
                                </group>
                            </group>
                        </page>
                        <page string="Configurações de Atendimento" name="service_config">
                            <p class="text-muted">
                                Configure aqui o estilo de comunicação e personalidade que o agente de IA deve utilizar ao interagir com seus clientes, além de informações adicionais que o agente pode fornecer.
                            </p>
                            <!-- Mensagens de Comunicação -->
                            <div class="row">
                                <div class="col-12">
                                    <h3 class="o_form_label">Mensagens de Comunicação</h3>
                                    <p class="text-muted mb-3">
                                        Configure as mensagens que o agente utilizará durante o atendimento.
                                    </p>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-lg-4">
                                    <div class="o_setting_box">
                                        <div class="o_setting_right_pane">
                                            <label for="greeting_message" string="Saudação Inicial" class="o_form_label"/>
                                            <div class="text-muted mb-2">Mensagem de boas-vindas ao iniciar o atendimento</div>
                                            <field name="greeting_message" placeholder="Olá, bem-vindo à nossa empresa!" class="w-100"/>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-lg-4">
                                    <div class="o_setting_box">
                                        <div class="o_setting_right_pane">
                                            <label for="farewell_message" string="Mensagem de Despedida" class="o_form_label"/>
                                            <div class="text-muted mb-2">Mensagem de encerramento do atendimento</div>
                                            <field name="farewell_message" placeholder="Obrigado por entrar em contato!" class="w-100"/>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-lg-4">
                                    <div class="o_setting_box">
                                        <div class="o_setting_right_pane">
                                            <label for="rating_request_message" string="Mensagem de Solicitação de Avaliação" class="o_form_label"/>
                                            <div class="text-muted mb-2">Mensagem para solicitar avaliação do atendimento</div>
                                            <field name="rating_request_message" placeholder="Sua opinião é muito importante para nós. Como você avaliaria este atendimento?" class="w-100"/>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Opções de Finalização -->
                            <div class="row mt-4">
                                <div class="col-12">
                                    <h3 class="o_form_label">Opções de Finalização</h3>
                                    <p class="text-muted mb-3">
                                        Configure como o agente deve finalizar o atendimento.
                                    </p>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="o_setting_box">
                                        <div class="o_setting_left_pane">
                                            <field name="request_rating"/>
                                        </div>
                                        <div class="o_setting_right_pane">
                                            <label for="request_rating" string="Solicitar Avaliação do Atendimento" class="o_form_label"/>
                                            <div class="text-muted">
                                                Se ativado, o agente solicitará uma avaliação do atendimento ao finalizar a conversa
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-lg-6">
                                    <div class="o_setting_box">
                                        <div class="o_setting_left_pane">
                                            <field name="use_farewell"/>
                                        </div>
                                        <div class="o_setting_right_pane">
                                            <label for="use_farewell" string="Informar Site/Redes Sociais ao Finalizar" class="o_form_label"/>
                                            <div class="text-muted">
                                                Se ativado, o agente poderá mencionar o site e redes sociais da empresa ao finalizar a conversa
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Estilo de Comunicação e Personalidade -->
                            <div class="row mt-4">
                                <div class="col-12">
                                    <h3 class="o_form_label">Estilo de Comunicação e Personalidade</h3>
                                    <p class="text-muted mb-3">
                                        Configure o estilo de comunicação e personalidade do agente de IA para melhor atender ao seu tipo de negócio.
                                    </p>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-lg-5">
                                    <!-- Tom de Comunicação -->
                                    <div class="o_setting_box mb-3">
                                        <div class="o_setting_right_pane">
                                            <label for="tone" string="Tom de Comunicação" class="o_form_label"/>
                                            <div class="text-muted mb-2">Define o tom que o agente usará na comunicação</div>
                                            <field name="tone" class="w-100"/>
                                        </div>
                                    </div>

                                    <!-- Voz do Agente -->
                                    <div class="o_setting_box mb-3">
                                        <div class="o_setting_right_pane">
                                            <label for="voice" string="Voz do Agente" class="o_form_label"/>
                                            <div class="text-muted mb-2">Define a personalidade da voz do agente</div>
                                            <field name="voice" class="w-100"/>
                                        </div>
                                    </div>

                                    <!-- Nível de Formalidade -->
                                    <div class="o_setting_box mb-3">
                                        <div class="o_setting_right_pane">
                                            <label for="formality" string="Nível de Formalidade" class="o_form_label"/>
                                            <div class="text-muted mb-2">Define o nível de formalidade na comunicação</div>
                                            <field name="formality" class="w-100"/>
                                        </div>
                                    </div>

                                    <!-- Uso de Emojis -->
                                    <div class="o_setting_box">
                                        <div class="o_setting_right_pane">
                                            <label for="emoji_usage" string="Uso de Emojis" class="o_form_label"/>
                                            <div class="text-muted mb-2">Define a frequência de uso de emojis pelo agente</div>
                                            <field name="emoji_usage" class="w-100"/>
                                        </div>
                                    </div>
                                </div>

                                <!-- Exemplos de uso ideal -->
                                <div class="col-lg-7">
                                    <div class="alert alert-info" role="alert">
                                        <h4 class="alert-heading">Exemplos de uso ideal para cada opção</h4>
                                        <table class="table table-sm table-bordered mt-3">
                                            <thead class="thead-light">
                                                <tr>
                                                    <th>Campo</th>
                                                    <th>Opção</th>
                                                    <th>Exemplo de negócio ideal</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td rowspan="4">Tom</td>
                                                    <td>Amigável</td>
                                                    <td>Loja de roupas femininas, petshop, escola de idiomas online</td>
                                                </tr>
                                                <tr>
                                                    <td>Educado</td>
                                                    <td>Consultório odontológico, assistência técnica de celulares</td>
                                                </tr>
                                                <tr>
                                                    <td>Profissional</td>
                                                    <td>Plataforma de cursos, coworking, empresa de seguros digitais</td>
                                                </tr>
                                                <tr>
                                                    <td>Técnico</td>
                                                    <td>Clínica de diagnóstico por imagem, suporte de software B2B</td>
                                                </tr>

                                                <tr>
                                                    <td rowspan="4">Voz</td>
                                                    <td>Acolhedor</td>
                                                    <td>Clínica estética, loja de presentes personalizados</td>
                                                </tr>
                                                <tr>
                                                    <td>Energético</td>
                                                    <td>Loja de eletrônicos, e-commerce de suplementos</td>
                                                </tr>
                                                <tr>
                                                    <td>Calmo</td>
                                                    <td>Psicólogos, empresa de yoga e bem-estar</td>
                                                </tr>
                                                <tr>
                                                    <td>Objetivo</td>
                                                    <td>Operadora de plano de saúde, imobiliária</td>
                                                </tr>

                                                <tr>
                                                    <td rowspan="3">Formalidade</td>
                                                    <td>Informal</td>
                                                    <td>Hamburgueria artesanal, barbearia moderna</td>
                                                </tr>
                                                <tr>
                                                    <td>Moderado</td>
                                                    <td>Petshop, loja de cosméticos, papelaria criativa</td>
                                                </tr>
                                                <tr>
                                                    <td>Formal</td>
                                                    <td>Escritório de advocacia, clínica médica, corretora de seguros</td>
                                                </tr>

                                                <tr>
                                                    <td rowspan="2">Uso de Emojis</td>
                                                    <td>Uso Moderado</td>
                                                    <td>Perfis jovens: lojas de moda, delivery, academias</td>
                                                </tr>
                                                <tr>
                                                    <td>Não Usar</td>
                                                    <td>Clínicas, seguradoras, empresas com foco técnico/B2B</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <group string="Informações Adicionais">
                                <group>
                                    <field name="share_address" string="Permitir ao agente informar o endereço quando solicitado"/>
                                    <field name="inform_promotions" string="Quando estiver em vendas, informar promoções e sugerir produtos"/>
                                </group>
                            </group>

                            <group string="Site e Redes Sociais">
                                <group string="Site da Empresa">
                                    <field name="website_url" placeholder="https://www.exemplo.com.br"/>
                                    <field name="website_mention"/>
                                </group>
                                <group string="Facebook">
                                    <field name="facebook_url" placeholder="https://www.facebook.com/exemplo"/>
                                    <field name="facebook_mention"/>
                                </group>
                                <group string="Instagram">
                                    <field name="instagram_url" placeholder="https://www.instagram.com/exemplo"/>
                                    <field name="instagram_mention"/>
                                </group>
                            </group>
                        </page>
                        <page string="Serviços de IA" name="services">
                            <div class="alert alert-info" role="alert">
                                <strong>Serviços de IA Contratados</strong>
                                <p>Abaixo estão os serviços de IA atualmente contratados para sua empresa. Para adicionar mais serviços, entre em contato com a Sprintia.</p>
                            </div>

                            <div attrs="{'invisible': [('enable_sales', '=', False)]}">
                                <h3 style="margin-top: 20px; color: #00C853;">Vendas de Produtos e Serviços</h3>
                                <p class="text-muted">Permite que o agente de IA forneça informações sobre produtos, preços, promoções e realize vendas.</p>
                                <hr/>
                            </div>

                            <div attrs="{'invisible': [('enable_scheduling', '=', False)]}">
                                <h3 style="margin-top: 20px; color: #00C853;">Agendamentos</h3>
                                <p class="text-muted">Permite que o agente de IA realize agendamentos de serviços, consultas ou reservas.</p>
                                <hr/>
                            </div>

                            <div attrs="{'invisible': [('enable_delivery', '=', False)]}">
                                <h3 style="margin-top: 20px; color: #00C853;">Delivery</h3>
                                <p class="text-muted">Permite que o agente de IA forneça informações sobre entregas, prazos e status de pedidos.</p>
                                <hr/>
                            </div>

                            <div attrs="{'invisible': [('enable_support', '=', False)]}">
                                <h3 style="margin-top: 20px; color: #00C853;">Suporte ao Cliente</h3>
                                <p class="text-muted">Permite que o agente de IA forneça suporte técnico, responda dúvidas e resolva problemas.</p>
                                <hr/>
                            </div>

                            <div>
                                <div class="alert alert-warning" role="alert">
                                    <strong>Outros Serviços Disponíveis</strong>
                                    <p>Amplie as capacidades do seu atendimento com mais serviços de IA:</p>
                                </div>

                                <div attrs="{'invisible': [('enable_sales', '=', True)]}">
                                    <h3 style="margin-top: 20px; color: #FFA000;">Vendas de Produtos e Serviços</h3>
                                    <p class="text-muted">Permite que o agente de IA forneça informações sobre produtos, preços, promoções e realize vendas.</p>
                                    <hr/>
                                </div>

                                <div attrs="{'invisible': [('enable_scheduling', '=', True)]}">
                                    <h3 style="margin-top: 20px; color: #FFA000;">Agendamentos</h3>
                                    <p class="text-muted">Permite que o agente de IA realize agendamentos de serviços, consultas ou reservas.</p>
                                    <hr/>
                                </div>

                                <div attrs="{'invisible': [('enable_delivery', '=', True)]}">
                                    <h3 style="margin-top: 20px; color: #FFA000;">Delivery</h3>
                                    <p class="text-muted">Permite que o agente de IA forneça informações sobre entregas, prazos e status de pedidos.</p>
                                    <hr/>
                                </div>

                                <div attrs="{'invisible': [('enable_support', '=', True)]}">
                                    <h3 style="margin-top: 20px; color: #FFA000;">Suporte ao Cliente</h3>
                                    <p class="text-muted">Permite que o agente de IA forneça suporte técnico, responda dúvidas e resolva problemas.</p>
                                    <hr/>
                                </div>

                                <div class="alert alert-info" style="margin-top: 20px;">
                                    <p><strong>Entre em contato com a Sprintia para contratar mais serviços!</strong></p>
                                    <p>Email: contato@sprintia.com.br | Website: <a href="https://www.sprintia.com.br" target="_blank">www.sprintia.com.br</a></p>
                                </div>
                            </div>
                        </page>
                        <page string="Status de Sincronização" name="sync_status_page" attrs="{'invisible': [('sync_status', '!=', 'error')]}">
                            <group string="Detalhes do Erro">
                                <field name="error_message" readonly="1" nolabel="1"/>
                            </group>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids"/>
                    <field name="activity_ids"/>
                    <field name="message_ids"/>
                </div>
            </form>
        </field>
    </record>

    <!-- Visualização de árvore -->
    <record id="view_company_service_tree" model="ir.ui.view">
        <field name="name">company.service.tree</field>
        <field name="model">company.service</field>
        <field name="arch" type="xml">
            <tree string="Empresa e Serviços">
                <field name="name"/>
                <field name="sync_status"/>
                <field name="last_sync"/>
            </tree>
        </field>
    </record>

    <!-- Ação -->
    <record id="action_company_service" model="ir.actions.act_window">
        <field name="name">Empresa e Serviços</field>
        <field name="res_model">company.service</field>
        <field name="view_mode">tree,form</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Configure as informações da sua empresa e serviços de IA
            </p>
            <p>
                Configure as informações da sua empresa, serviços contratados e
                preferências de comunicação para integração com o sistema de IA.
            </p>
        </field>
    </record>
</odoo>
