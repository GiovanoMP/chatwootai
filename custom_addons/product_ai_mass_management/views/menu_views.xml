<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Ação para abrir a vista de gerenciamento em massa -->
    <record id="action_product_ai_mass_management" model="ir.actions.act_window">
        <field name="name">Gerenciamento de Produtos e Estoque</field>
        <field name="res_model">product.template</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="product_ai_mass_management_view_tree"/>
        <field name="search_view_id" ref="product_ai_mass_management_search_view"/>
        <field name="context">{'search_default_active': 1, 'search_default_not_synced': 1}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Gerencie seus produtos no Sistema de IA
            </p>
            <p>
                Selecione produtos para sincronizar com o sistema de IA,
                ajuste preços específicos e gerencie descrições em massa.
            </p>
            <div class="alert alert-info" role="alert">
                <p><strong>Dica:</strong> Defina um preço específico para o Sistema de IA e sincronize os produtos para disponibilizá-los para buscas semânticas.</p>
            </div>
        </field>
    </record>

    <!-- Menu Principal -->
    <menuitem id="menu_ai_system_root"
              name="Gestão de Produtos e Estoque"
              web_icon="product_ai_mass_management,static/description/icon.png"
              sequence="10"/>

    <!-- Submenu para Gerenciamento em Massa -->
    <menuitem id="menu_product_ai_mass_management"
              name="Gerenciamento em Massa de Produtos"
              parent="menu_ai_system_root"
              action="action_product_ai_mass_management"
              sequence="10"/>
              
    <!-- Submenu para Canais de Venda -->
    <menuitem id="menu_product_sales_channels"
              name="Canais de Venda"
              parent="menu_ai_system_root"
              action="action_product_sales_channel"
              sequence="20"/>
              
    <!-- Submenu para Mapeamentos de Canal -->
    <menuitem id="menu_product_channel_mappings"
              name="Mapeamentos de Canal"
              parent="menu_ai_system_root"
              action="action_product_channel_mapping"
              sequence="30"/>

    <!-- Menu alternativo no catálogo de produtos -->
    <menuitem id="menu_product_ai_mass_management_catalog"
              name="Gerenciamento em Massa de Produtos no Sistema de IA"
              parent="sale.product_menu_catalog"
              action="action_product_ai_mass_management"
              sequence="6"/>

    <!-- Menu alternativo no controle de inventário -->
    <menuitem id="menu_product_ai_mass_management_inventory"
              name="Gerenciamento em Massa de Produtos no Sistema de IA"
              parent="stock.menu_stock_inventory_control"
              action="action_product_ai_mass_management"
              sequence="6"/>

    <!-- Ações de Servidor para Operações em Massa -->
    <record id="action_generate_descriptions_mass" model="ir.actions.server">
        <field name="name">Gerar Descrições</field>
        <field name="model_id" ref="product.model_product_template"/>
        <field name="binding_model_id" ref="product.model_product_template"/>
        <field name="binding_view_types">list</field>
        <field name="state">code</field>
        <field name="code">action = records.generate_descriptions_mass()</field>
    </record>

    <record id="action_sync_mass_products" model="ir.actions.server">
        <field name="name">Sincronizar com IA</field>
        <field name="model_id" ref="product.model_product_template"/>
        <field name="binding_model_id" ref="product.model_product_template"/>
        <field name="binding_view_types">list</field>
        <field name="state">code</field>
        <field name="code">action = records.sync_with_ai_mass()</field>
    </record>
    
    <record id="action_sync_with_channels" model="ir.actions.server">
        <field name="name">Sincronizar com Canais</field>
        <field name="model_id" ref="product.model_product_template"/>
        <field name="binding_model_id" ref="product.model_product_template"/>
        <field name="binding_view_types">list</field>
        <field name="state">code</field>
        <field name="code">action = records.action_sync_with_channels()</field>
    </record>
    
    <record id="action_add_to_channel_server" model="ir.actions.server">
        <field name="name">Adicionar ao Canal</field>
        <field name="model_id" ref="product.model_product_template"/>
        <field name="binding_model_id" ref="product.model_product_template"/>
        <field name="binding_view_types">list</field>
        <field name="state">code</field>
        <field name="code">action = records.action_add_to_channel()</field>
    </record>
    
    <record id="action_import_export_products_server" model="ir.actions.server">
        <field name="name">Importar/Exportar Produtos</field>
        <field name="model_id" ref="product.model_product_template"/>
        <field name="binding_model_id" ref="product.model_product_template"/>
        <field name="binding_view_types">list</field>
        <field name="state">code</field>
        <field name="code">action = records.action_import_export_wizard()</field>
    </record>
</odoo>
