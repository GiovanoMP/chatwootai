# ROADMAP - 26/03/2025

## Visão Geral

Este documento define o roteiro de desenvolvimento para a integração entre o ChatwootAI e o Odoo, com foco na implementação da busca híbrida e sincronização de produtos. O objetivo é criar um sistema robusto que permita a busca semântica de produtos e a geração de descrições enriquecidas.

## Decisões Arquiteturais

1. **Protocolo de Comunicação**:
   - Manter XML-RPC como protocolo principal para comunicação do ChatwootAI com o Odoo
   - Implementar endpoints REST limitados apenas para receber webhooks do Odoo

2. **Multi-tenancy**:
   - Adotar a Opção 1: Um banco de dados Odoo separado por cliente (account_1, account_2, etc.)
   - Usar credenciais de administrador padronizadas para todos os bancos
   - Configurar no YAML de cada account_id

3. **Segurança**:
   - Implementar autenticação por token para webhooks
   - Configurar firewall para permitir apenas conexões de IPs conhecidos
   - Usar HTTPS para todas as comunicações

4. **Busca Híbrida**:
   - Implementar busca vetorial densa (semântica) usando OpenAI
   - Implementar busca vetorial esparsa (palavras-chave) usando BM25
   - Combinar resultados com pesos configuráveis (BM42)

5. **Processamento Assíncrono**:
   - Utilizar RabbitMQ para processamento assíncrono de tarefas pesadas
   - Implementar workers para processamento em background

## Roadmap de Implementação

### Fase 1: Integração Básica (Atual Sprint)

1. **Endpoints REST para Webhooks do Odoo**:
   - Criar endpoint para receber notificações de novos produtos
   - Criar endpoint para receber notificações de atualizações de produtos
   - Implementar autenticação por token

2. **Expansão do MCP-Odoo**:
   - Adicionar suporte para múltiplos bancos de dados
   - Implementar cache com Redis para consultas frequentes
   - Adicionar métodos para obter metadados detalhados de produtos

3. **Módulo Odoo `semantic_product_description`**:
   - Revisar o módulo existente
   - Adicionar campos para descrição semântica
   - Implementar lógica para enviar webhooks ao ChatwootAI quando produtos são criados/atualizados

### Fase 2: Busca Híbrida e Vetorização (Próximo Sprint)

1. **Serviço de Vetorização**:
   - Implementar geração de embeddings via OpenAI
   - Implementar armazenamento no Qdrant
   - Implementar cache de embeddings com Redis

2. **Busca Híbrida (BM42)**:
   - Implementar componente de busca densa (semântica)
   - Implementar componente de busca esparsa (BM25)
   - Desenvolver lógica de combinação de resultados

3. **Integração com RabbitMQ**:
   - Configurar filas para processamento assíncrono
   - Implementar workers para geração de embeddings
   - Implementar workers para sincronização de produtos

### Fase 3: Implantação e Segurança (Sprint Futuro)

1. **Configuração de Produção**:
   - Configurar Odoo em VPS com HTTPS
   - Implementar firewall e regras de segurança
   - Configurar monitoramento e alertas

2. **Documentação e Testes**:
   - Documentar API REST para webhooks
   - Criar testes automatizados para integração
   - Documentar processo de implantação

3. **Otimizações**:
   - Implementar estratégias de cache avançadas
   - Otimizar consultas ao Odoo
   - Implementar estratégias de fallback

## Tarefas Imediatas (Hoje)

1. **Implementar Endpoints REST para Webhooks**:
   - Criar estrutura básica da API REST
   - Implementar endpoint para sincronização de produtos
   - Implementar autenticação por token

2. **Expandir MCP-Odoo**:
   - Adicionar métodos para obter metadados de produtos
   - Implementar cache para consultas frequentes
   - Testar com múltiplos bancos de dados

3. **Revisar Módulo Odoo `semantic_product_description`**:
   - Verificar funcionalidades existentes
   - Identificar pontos de integração com o ChatwootAI
   - Planejar modificações necessárias

## Próximos Passos

Após a conclusão das tarefas imediatas, focaremos em:

1. Implementação completa da busca híbrida (BM42)
2. Integração com RabbitMQ para processamento assíncrono
3. Testes de carga e otimização de desempenho

## Métricas de Sucesso

- Tempo de resposta da busca híbrida < 1 segundo
- Taxa de acerto da busca semântica > 85%
- Tempo de sincronização de produtos < 5 minutos
- Zero falhas de segurança em testes de penetração
